<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">   
    <script>(function(d){var s = d.createElement("script");s.setAttribute("data-account", "asfBZcBqQ3");s.setAttribute("src", "https://cdn.userway.org/widget.js");(d.body || d.head).appendChild(s);})(document)</script><noscript>Please ensure Javascript is enabled for purposes of <a href="https://userway.org">website accessibility</a></noscript>
    <link rel="stylesheet" href="../css/modalVaga.css">
    <link rel="stylesheet" href="../css/vagas.css">
    <script src="../js/vaga.js" defer type="module"></script>
    <title>Vagas</title>
</head>
<body>
    <section id="containerModal">
        <span OnClick="closeModal()" href="#fechar" title="Fechar" class="fechar">
            <img src="../img/close-modal-icon.png" alt="close-modal">
        </span>
        <div id="headerVaga">
            <div id="imgPreviewEmpresa">
                <img src="" alt="">
            </div>
            <div id="informacoesVaga">
                <div id="tituloDeficienciaVaga">
                    <div id="tituloVaga">
                        <h1>Desenvolvedor Front-End Jr.</h1>
                    </div>
                    <div id="deficienciaVaga">
                        <p>Deficiencia: Motora</p>
                    </div>
                </div>
                <div id="nomeEmpresa">
                    <img src="../img/empresaIcon.svg" alt=""> <p>Nubank</p>
                </div>
                <div id="localVaga">
                    <img src="../img/localIcon.svg" alt=""> <p>Carapicuiba-SP</p>
                </div>
            </div>
        </div>
        <div id="buttonsContainer">
            <button class="formatacaoButton active"><a>Candidatar-se</a></button>
            <button class="formatacaoButton activeSec"><img src="../img/saveIcon.svg" alt=""><a>Salvar</a></button>
            <button class="formatacaoButton activeSec"><img src="../img/dispensarIcon.svg" alt=""><a> Dispensar</a></button>
        </div>
        <div id="containerDescricao">
            <div class="topicoContainer">            
                <div class="tituloContainer formatacaoTitulo">
                    <img src="../img/topicoIcon.svg" alt=""><h1>Requisitos</h1>
                </div>
                <div class="textoContainer formatacaoTexto">
                    <p>
                    </p>
                </div>
            </div>
            <div class="topicoContainer">            
                <div class="tituloContainer formatacaoTitulo">
                    <img src="../img/topicoIcon.svg" alt=""><h1>Horários</h1>
                </div>
                <div class="textoContainer formatacaoTexto">
                    <p>
                    </p>
                </div>
            </div>
            <div class="topicoContainer">            
                <div class="tituloContainer formatacaoTitulo">
                    <img src="../img/topicoIcon.svg" alt=""><h1>Tipo de Trabalho</h1>
                </div>
                <div class="textoContainer formatacaoTexto">
                    <p>
                    </p>
                </div>
            </div>
            <div class="topicoContainer">            
                <div class="tituloContainer formatacaoTitulo">
                    <img src="../img/topicoIcon.svg" alt=""><h1></h1>
                </div>
                <div class="textoContainer formatacaoTexto">
                    <p>
                    </p>
                </div>
            </div>
            <div class="topicoContainer">            
                <div class="tituloContainer formatacaoTitulo">
                    <img src="../img/topicoIcon.svg" alt=""><h1>Informações</h1>
                </div>
                <div class="textoContainer formatacaoTexto">
                    <p>
                    </p>
                </div>
            </div>
        </div>
        <div id="footerModal">
            <img src="" alt="">
            <a href="">Visite nosso perfil.</a>
        </div>
    </section>
    <header>
        <div class="conteinerSearch">
            <div class="logo">
                <img src="../img/logo.png" alt="">
            </div>
            <div class="barraPesquisa">
                <input type="text">
                <img src="../img/pesquisa.png" alt="">
            </div>
            <div class="fotoPerfil">
                
            </div>
        </div>
        <div class="conteinerTitulo">
            <h1>Vagas</h1>
        </div>
    </header>
    <main>
        <div class="filtros">
            <div class="tituloFiltros">
                <h2>Filtros</h2>
            </div>
            <div class="filtrosDeficiencia">
                <div class="tituloDeficiencia">
                    <h3>Deficiencia</h3>
                </div>
                <div class="opcoesDeficiencia">
                    <div class="checkbox">
                        <input type="checkbox" id="checkbox1"> Visual
                    </div>
                    <div class="checkbox">
                        <input type="checkbox" id="checkbox2"> Mental
                    </div>
                    <div class="checkbox">
                        <input type="checkbox" id="checkbox3"> Auditiva
                    </div>
                    <div class="checkbox">
                        <input type="checkbox" id="checkbox4"> Motora
                    </div>
                </div>
            </div>
            <div class="filtrosRegiao">
                <div class="tituloRegiao">
                    <h3>Região</h3>
                </div>
                <div class="selectEstado">
                    <p>Estado</p>
                    <select name="" id=""></select>
                </div>
                <div class="selectCidade">
                    <p>Cidade</p>
                    <select name="" id=""></select>
                </div>
            </div>
            <div class="filtrosSalario">
                <div class="tituloSalario">
                    <h3>Salário</h3>
                </div>
                <div class="radioSalario">
                    <div class="inputSalario">
                        <input type="radio" name="rad"> Acima de R$ 1.200,00
                    </div>
                    <div class="inputSalario">
                        <input type="radio" name="rad"> Acima de R$ 2.500,00
                    </div>
                    <div class="inputSalario">
                        <input type="radio" name="rad"> Acima de R$ 5.000,00
                    </div>
                    <div class="inputSalario">
                        <input type="radio" name="rad"> Acima de R$ 10.000,00
                    </div>
                </div>
            </div>
            <div class="suporteOferecido">
                <div class="tituloSuporte">
                    <h3>Suporte Oferecido</h3>
                </div>
                <div class="selectSuporte">
                    <select name="" id=""></select>
                </div>
            </div>
        </div>
        <div class="vagasConteiner">
            <div class="vagas">
                <div class="headerVagas">
                    <div class="informacaoVaga">
                        <div class="imgEmpresa">
                            <img src="../img/logoEmpresa.png" alt="">
                        </div>
                        <div class="conteudoVaga">
                            <h1>Desenvolvedor Web</h1>
                            <div class="empresaVaga">
                                <img src="../img/empresa.png" alt=""> 
                                <p>Nubank</p> 
                            </div>
                            <div class="empresaVaga">
                                <img src="../img/local.png" alt=""> 
                                <p>Alphavile - SP</p> 
                            </div>
                        </div>
                    </div>
                    <div class="salvarVaga">
                        <button>
                            <img src="../img/salvar.png" alt=""> 
                            <p>Salvar</p>
                        </button> 
                    </div>
                </div>
                <div class="footerVagas">
                    <div class="tipoDeficiencia">
                        <h2>Deficiencia: Visual</h2>
                    </div>
                    <div class="botaoSaibaMais" onClick="">
                        <button>Saiba mais</button>
                    </div>
                </div>
            </div>
            <script>
                const abrirModal =  async(id) => {
                    let idVaga = id
                 
                    const urlBuscar = `http://10.107.144.26:8080/vaga/buscar/${idVaga}`
                    const response = await fetch(urlBuscar).then(resp => resp.json()).then(dados => dados)
                    
                    const criarModal = ({titulo, empresa, formacaoDesejada, deficiencia, horario, localTrabalho, salario, tipoContrato, beneficio}) => {
                        const modal = document.createElement('div')
                        modal.innerHTML=`
                            <span OnClick="closeModal()" href="#fechar" title="Fechar" class="fechar">
                                <img src="../img/close-modal-icon.png" alt="close-modal">
                            </span>
                            <div id="headerVaga">
                                <div id="imgPreviewEmpresa">
                                    <img src="" alt="">
                                </div>
                                <div id="informacoesVaga">
                                    <div id="tituloDeficienciaVaga">
                                        <div id="tituloVaga">
                                            <h1>${titulo}</h1>
                                        </div>
                                        <div id="deficienciaVaga">
                                            <p>Deficiencia: ${deficiencia.map(item => item.tipoDeficiencia)}</p>
                                        </div>
                                    </div>
                                    <div id="nomeEmpresa">
                                        <img src="../img/empresaIcon.svg" alt=""> <p>${empresa.empresa}</p>
                                    </div>
                                    <div id="localVaga">
                                        <img src="../img/localIcon.svg" alt=""> <p>${localTrabalho.cidade}-${localTrabalho.sigla}</p>
                                    </div>
                                </div>
                            </div>
                            <div id="buttonsContainer">
                                <button id='btnCandidata' class="formatacaoButton active"><a>Candidatar-se</a></button>
                                <button id='btnSalva' class="formatacaoButton activeSec"><img src="../img/saveIcon.svg" alt=""><a>Salvar</a></button>
                                <button id='btnDispensa' class="formatacaoButton activeSec"><img src="../img/dispensarIcon.svg" alt=""><a> Dispensar</a></button>
                            </div>
                            <div id="containerDescricao">
                                <div class="topicoContainer">            
                                    <div class="tituloContainer formatacaoTitulo">
                                        <img src="../img/topicoIcon.svg" alt=""><h1>Area de atuação</h1>
                                    </div>
                                    <div class="textoContainer formatacaoTexto">
                                        <p>
                                            ${formacaoDesejada.map(item => item.areaAtuacao)}
                                        </p>
                                    </div>
                                </div>
                                <div class="topicoContainer">            
                                    <div class="tituloContainer formatacaoTitulo">
                                        <img src="../img/topicoIcon.svg" alt=""><h1>Horários</h1>
                                    </div>
                                    <div class="textoContainer formatacaoTexto">
                                        <p>
                                            ${horario.horarioInicio} - ${horario.horarioFinal}
                                        </p>
                                    </div>
                                </div>
                                <div class="topicoContainer">            
                                    <div class="tituloContainer formatacaoTitulo">
                                        <img src="../img/topicoIcon.svg" alt=""><h1>Tipo de Contrato</h1>
                                    </div>
                                    <div class="textoContainer formatacaoTexto">
                                        <p>
                                            ${tipoContrato.tpoContrato}
                                        </p>
                                    </div>
                                </div>
                                <div class="topicoContainer">            
                                    <div class="tituloContainer formatacaoTitulo">
                                        <img src="../img/topicoIcon.svg" alt=""><h1></h1>
                                    </div>
                                    <div class="textoContainer formatacaoTexto">
                                        <p>
                                        </p>
                                    </div>
                                </div>
                                <div class="topicoContainer">            
                                    <div class="tituloContainer formatacaoTitulo">
                                        <img src="../img/topicoIcon.svg" alt=""><h1>Informações</h1>
                                    </div>
                                    <div class="textoContainer formatacaoTexto">
                                        <p>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div id="footerModal">
                                <img src="" alt="">
                                <a href="">Visite nosso perfil.</a>
                            </div>
                        `

                        return modal
                    }
                    
                    console.log(response)

                    const container = document.querySelector('#containerModal')
                    const resposta = criarModal(response)
                    container.replaceChildren(resposta)
                    // await getVaga(idVaga)
                    // console.log(response)

                    const modal = document.getElementById('containerModal')
                    modal.classList.add('active');
                }

                const closeModal = () => {
                    const modal = document.getElementById('containerModal')
                    modal.classList.remove('active');
                    
                }

                const getVaga = async() => {

                const urlListar = 'http://10.107.144.26:8080/vaga/listar'
                const response = await fetch(urlListar).then(resp => resp.json()).then(dados => dados.content).then(content => content.filter (item => item.status == 0))
                return response

                }

                const criarVaga = ({titulo, empresa, localTrabalho, id, deficiencia}) => {
                    const vaga = document.createElement('div')
                    vaga.classList.add("vagas")
                    vaga.innerHTML = `
                            <div class="headerVagas">
                                <div class="informacaoVaga">
                                    <div class="imgEmpresa">
                                        <img src="../img/logoEmpresa.png" alt="">
                                    </div>
                                    <div class="conteudoVaga">
                                        <h1>${titulo}</h1>
                                        <div class="empresaVaga">
                                            <img src="../img/empresa.png" alt=""> 
                                            <p>${empresa.empresa}</p> 
                                        </div>
                                        <div class="empresaVaga">
                                            <img src="../img/local.png" alt=""> 
                                            <p>${localTrabalho.cidade} - ${localTrabalho.sigla}</p> 
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            <div class="footerVagas">
                                <div class="tipoDeficiencia">
                                    <h2>Deficiencia: ${deficiencia.map(item => item.tipoDeficiencia)}</h2>
                                </div>
                                <div class="botaoSaibaMais">
                                    <button id="btnSaibaMais" onClick="abrirModal(${id})">Saiba mais</button>
                                </div>
                            </div>
                    `

                    return vaga;
                }

                const carregarVaga = async() => {
                const container = document.querySelector('.vagasConteiner')
                const vagas = await getVaga();
                const colunas = vagas.map(criarVaga)
                container.replaceChildren(...colunas)
                }

                carregarVaga()
            </script>
        </div>
    </main>
    <footer>
        <div class="direitos">
            <p>
                PCD Job  é um projeto estudantil e tem todos os direitos reservados ©2022
            </p>
        </div>
        <div class="versao">
            <p>
                Versão:1.0
            </p>
        </div>
    </footer>
</body>
</html>